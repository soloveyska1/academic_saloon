# Developer Handover Document
## Academic Saloon - Telegram Bot + Mini App

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2025-12-03
**–í–µ—Ä—Å–∏—è:** 1.0.0
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** Production (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ VPS)

---

## 1. –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### –ß—Ç–æ —ç—Ç–æ?
**Academic Saloon** ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ä–∞–±–æ—Ç (–∫—É—Ä—Å–æ–≤—ã–µ, –¥–∏–ø–ª–æ–º—ã, —Ä–µ—Ñ–µ—Ä–∞—Ç—ã –∏ —Ç.–¥.) —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (Mini App) –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- **–ó–∞–∫–∞–∑ —Ä–∞–±–æ—Ç** —á–µ—Ä–µ–∑ –ø–æ—à–∞–≥–æ–≤—ã–π wizard –≤ –±–æ—Ç–µ (–≤—ã–±–æ—Ä —Ç–∏–ø–∞ —Ä–∞–±–æ—Ç—ã, –ø—Ä–µ–¥–º–µ—Ç–∞, –¥–µ–¥–ª–∞–π–Ω–∞, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤)
- **–°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã** (—Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ P2P + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ÆKassa)
- **Live-–∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–∞–∑–æ–≤** –≤ –∞–¥–º–∏–Ω—Å–∫–æ–º Forum Topic (—Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞ —Å —Ç–æ–ø–∏–∫–∞–º–∏)
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç** –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –∞–¥–º–∏–Ω–æ–º –ø–æ –∫–∞–∂–¥–æ–º—É –∑–∞–∫–∞–∑—É
- **Mini App** ‚Äî –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è, –∑–∞–∫–∞–∑–æ–≤ –∏ —Ä—É–ª–µ—Ç–∫–∏ –±–æ–Ω—É—Å–æ–≤
- **–°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏** (—Ä–∞–Ω–≥–∏ –ø–æ —Å—É–º–º–µ —Ç—Ä–∞—Ç + —Å–∫–∏–¥–∫–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–∫–∞–∑–æ–≤)
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (5% –æ—Ç –∑–∞–∫–∞–∑–æ–≤ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π)

### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
```
–ö–ª–∏–µ–Ω—Ç ‚Üí /start ‚Üí –í—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø —Ä–∞–±–æ—Ç—ã ‚Üí –ó–∞–ø–æ–ª–Ω—è–µ—Ç –¥–µ—Ç–∞–ª–∏ ‚Üí
‚Üí –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –≤ —Ç–æ–ø–∏–∫–µ ‚Üí –ù–∞–∑–Ω–∞—á–∞–µ—Ç —Ü–µ–Ω—É ‚Üí
‚Üí –ö–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç ‚Üí –†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚Üí –§–∞–π–ª—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
```

---

## 2. –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

### Backend (Python 3.11)
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|-----------|------------|--------|
| Telegram Bot | aiogram | 3.10+ |
| Web API | FastAPI | 0.109+ |
| ASGI Server | uvicorn | 0.27+ |
| ORM | SQLAlchemy | 2.0+ (async) |
| Migrations | Alembic | 1.12+ |
| Validation | Pydantic | 2.0+ |
| Cache/FSM | Redis | 5.0+ |
| Payment | YooKassa SDK | 3.0+ |
| HTTP Client | httpx | 0.25+ |

### Frontend (React + TypeScript)
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|-----------|------------|--------|
| Framework | React | 18.2 |
| Router | react-router-dom | 6.20 |
| Telegram SDK | @telegram-apps/sdk-react | 1.0 |
| Bundler | Vite | 5.0 |
| Language | TypeScript | 5.3 |

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| –°–£–ë–î | PostgreSQL 15 (Alpine) |
| Async Driver | asyncpg |
| Cache/Sessions | Redis 7 (Alpine) |

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| VPS | –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (Linux) |
| Container | Docker + Docker Compose |
| Reverse Proxy | Nginx (SSL termination) |
| Frontend Hosting | Vercel (mini-app) |
| Domain | academic-saloon.duckdns.org |
| SSL | Let's Encrypt (certbot) |

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                              –ö–õ–ò–ï–ù–¢–´                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                                      ‚îÇ
              ‚îÇ Telegram Bot API                     ‚îÇ HTTPS (Vercel)
              ‚ñº                                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram Servers     ‚îÇ              ‚îÇ    Mini App (React + Vite)      ‚îÇ
‚îÇ   - Polling mode       ‚îÇ              ‚îÇ    vercel.app deployment        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                                      ‚îÇ
              ‚îÇ Long Polling                         ‚îÇ HTTPS API calls
              ‚ñº                                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         VPS SERVER                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                         NGINX                                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    - SSL termination (Let's Encrypt)                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    - Reverse proxy: /api/* ‚Üí localhost:8000                      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                    ‚îÇ                                    ‚îÇ
‚îÇ                                    ‚ñº                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                    DOCKER COMPOSE                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  PostgreSQL ‚îÇ ‚îÇ    Redis     ‚îÇ ‚îÇ      Bot Container       ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   :5432     ‚îÇ ‚îÇ    :6379     ‚îÇ ‚îÇ  - main.py (aiogram)     ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ             ‚îÇ ‚îÇ  FSM + Cache ‚îÇ ‚îÇ  - FastAPI on :8000      ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ               ‚îÇ                      ‚îÇ                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                    saloon_net (bridge)                           ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –í–∞–∂–Ω—ã–µ ID –∫–∞–Ω–∞–ª–æ–≤/–≥—Ä—É–ø–ø:
```python
LOG_CHANNEL_ID = -1003300275622       # –ö–∞–Ω–∞–ª –ª–æ–≥–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π
ORDERS_CHANNEL_ID = -1003331104298    # –ö–∞–Ω–∞–ª Live-–∫–∞—Ä—Ç–æ—á–µ–∫ (deprecated, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ø–∏–∫–∏)
ADMIN_GROUP_ID = -1003352978651       # –°—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞ —Å Forum Topics –¥–ª—è —Ç–∏–∫–µ—Ç–æ–≤
```

---

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (File Tree)

```
academic_saloon/
‚îú‚îÄ‚îÄ main.py                    # üöÄ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ + FastAPI
‚îú‚îÄ‚îÄ requirements.txt           # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile                 # –û–±—Ä–∞–∑ Python 3.11-slim
‚îú‚îÄ‚îÄ docker-compose.yml         # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è: db + redis + bot
‚îú‚îÄ‚îÄ alembic.ini               # –ö–æ–Ω—Ñ–∏–≥ –º–∏–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ .env.example              # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ core/                      # ‚öôÔ∏è –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.py             # Pydantic Settings (–≤—Å–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
‚îÇ   ‚îú‚îÄ‚îÄ redis_pool.py         # –ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π Redis
‚îÇ   ‚îú‚îÄ‚îÄ media_cache.py        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ file_id –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ saloon_status.py      # –°—Ç–∞—Ç—É—Å —Å–∞–ª—É–Ω–∞ (–æ—Ç–∫—Ä—ã—Ç/–∑–∞–∫—Ä—ã—Ç)
‚îÇ
‚îú‚îÄ‚îÄ database/                  # üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ db.py                 # SQLAlchemy engine + session maker
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.py          # –ú–æ–¥–µ–ª—å User (—Ä–∞–Ω–≥–∏, –ª–æ—è–ª—å–Ω–æ—Å—Ç—å, –±–æ–Ω—É—Å—ã)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ orders.py         # –ú–æ–¥–µ–ª–∏ Order, OrderMessage, Conversation
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îÇ       ‚îú‚îÄ‚îÄ env.py            # Alembic config
‚îÇ       ‚îî‚îÄ‚îÄ versions/         # –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
‚îÇ
‚îú‚îÄ‚îÄ bot/                       # ü§ñ Telegram Bot
‚îÇ   ‚îú‚îÄ‚îÄ handlers/             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ callback'–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py          # /start + deep links
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.py         # FSM wizard —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ (–ë–û–õ–¨–®–û–ô —Ñ–∞–π–ª!)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py          # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ my_orders.py      # –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order_chat.py     # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç –∫–ª–∏–µ–Ω—Ç-–∞–¥–º–∏–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ channel_cards.py  # –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –≤ –∫–∞–Ω–∞–ª–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu.py           # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ terms.py          # –û—Ñ–µ—Ä—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ log_actions.py    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –ª–æ–≥–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/            # Inline –∏ Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inline.py         # –û—Å–Ω–æ–≤–Ω—ã–µ inline-–∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.py         # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è wizard –∑–∞–∫–∞–∑–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.py        # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ terms.py          # –ö–Ω–æ–ø–∫–∏ –æ—Ñ–µ—Ä—Ç—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/          # Middleware —Å–ª–æ–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error_handler.py  # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db_session.py     # –ò–Ω—ä–µ–∫—Ü–∏—è —Å–µ—Å—Å–∏–∏ –ë–î –≤ —Ö–µ–Ω–¥–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ban_check.py      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ antispam.py       # –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stop_words.py     # –§–∏–ª—å—Ç—Ä —Å—Ç–æ–ø-—Å–ª–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py         # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª (LogEvent)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pricing.py        # –†–∞—Å—á—ë—Ç —Ü–µ–Ω, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ live_cards.py     # Live-–∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ç–æ–ø–∏–∫–∞—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bonus.py          # –°–∏—Å—Ç–µ–º–∞ –±–æ–Ω—É—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yookassa.py       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ÆKassa
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yandex_disk.py    # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ø.–î–∏—Å–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ abandoned_detector.py  # –î–µ—Ç–µ–∫—Ç–æ—Ä –±—Ä–æ—à–µ–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ silence_reminder.py    # –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç–∏—à–∏–Ω–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ daily_stats.py    # –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unified_hub.py    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ç–æ–ø–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ order_progress.py # –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ states/               # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.py          # –°–æ—Å—Ç–æ—è–Ω–∏—è wizard –∑–∞–∫–∞–∑–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py          # –°–æ—Å—Ç–æ—è–Ω–∏—è –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat.py           # –°–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Ç–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ texts/                # –®–∞–±–ª–æ–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ terms.py          # –¢–µ–∫—Å—Ç –æ—Ñ–µ—Ä—Ç—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/                # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message_helpers.py # –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ media_group.py    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞–≥—Ä—É–ø–ø
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ media/                # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–æ—Ç–∞ (–Ω–µ –≤ git)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ api/                  # üåê FastAPI –¥–ª—è Mini App
‚îÇ       ‚îú‚îÄ‚îÄ app.py            # FastAPI application factory
‚îÇ       ‚îú‚îÄ‚îÄ routes.py         # API endpoints (/api/user, /api/orders, etc.)
‚îÇ       ‚îú‚îÄ‚îÄ schemas.py        # Pydantic response models
‚îÇ       ‚îî‚îÄ‚îÄ auth.py           # HMAC-SHA256 –≤–∞–ª–∏–¥–∞—Ü–∏—è Telegram initData
‚îÇ
‚îî‚îÄ‚îÄ mini-app/                  # üì± React Mini App
    ‚îú‚îÄ‚îÄ package.json          # NPM –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îú‚îÄ‚îÄ vite.config.ts        # Vite –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ vercel.json           # –ö–æ–Ω—Ñ–∏–≥ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel
    ‚îú‚îÄ‚îÄ index.html            # Entry HTML
    ‚îî‚îÄ‚îÄ src/
        ‚îú‚îÄ‚îÄ main.tsx          # React entry point
        ‚îú‚îÄ‚îÄ App.tsx           # Router –∏ –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
        ‚îú‚îÄ‚îÄ types.ts          # TypeScript —Ç–∏–ø—ã
        ‚îú‚îÄ‚îÄ api/
        ‚îÇ   ‚îî‚îÄ‚îÄ userApi.ts    # API –∫–ª–∏–µ–Ω—Ç (fetch + auth headers)
        ‚îú‚îÄ‚îÄ hooks/
        ‚îÇ   ‚îî‚îÄ‚îÄ useUserData.ts # React hooks –¥–ª—è API
        ‚îú‚îÄ‚îÄ pages/
        ‚îÇ   ‚îú‚îÄ‚îÄ HomePage.tsx      # –ì–ª–∞–≤–Ω–∞—è (–ø—Ä–æ—Ñ–∏–ª—å, –±–∞–ª–∞–Ω—Å, –∑–∞–∫–∞–∑—ã)
        ‚îÇ   ‚îú‚îÄ‚îÄ OrdersPage.tsx    # –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
        ‚îÇ   ‚îú‚îÄ‚îÄ OrderDetailPage.tsx # –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
        ‚îÇ   ‚îî‚îÄ‚îÄ RoulettePage.tsx  # –†—É–ª–µ—Ç–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤
        ‚îú‚îÄ‚îÄ components/
        ‚îÇ   ‚îú‚îÄ‚îÄ Navigation.tsx    # –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
        ‚îÇ   ‚îî‚îÄ‚îÄ LoadingScreen.tsx # –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
        ‚îî‚îÄ‚îÄ styles/
            ‚îî‚îÄ‚îÄ global.css        # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
```

---

## 5. –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

### 5.1 –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: `main.py`

–ó–∞–ø—É—Å–∫–∞–µ—Ç **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** –±–æ—Ç–∞ –∏ FastAPI —Å–µ—Ä–≤–µ—Ä:

```python
async def main():
    await asyncio.gather(
        run_bot(),       # aiogram polling
        run_api_server() # FastAPI –Ω–∞ :8000
    )
```

**Bot:** Long polling, Redis FSM storage, middleware chain
**API:** uvicorn, CORS enabled, /api/* endpoints

### 5.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `core/config.py`

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ Pydantic Settings –∏–∑ `.env`:

```python
class Settings(BaseSettings):
    BOT_TOKEN: SecretStr
    BOT_USERNAME: str
    ADMIN_IDS: list[int]

    # Telegram –∫–∞–Ω–∞–ª—ã/–≥—Ä—É–ø–ø—ã
    LOG_CHANNEL_ID: int
    ORDERS_CHANNEL_ID: int
    ADMIN_GROUP_ID: int

    # PostgreSQL
    POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB, POSTGRES_HOST, POSTGRES_PORT

    # Redis
    REDIS_HOST, REDIS_PORT, REDIS_DB_FSM, REDIS_DB_CACHE

    # –ü–ª–∞—Ç–µ–∂–∏
    PAYMENT_PHONE, PAYMENT_CARD, PAYMENT_BANKS, PAYMENT_NAME
    YOOKASSA_SHOP_ID, YOOKASSA_SECRET_KEY (optional)
    YANDEX_DISK_TOKEN (optional)
```

### 5.3 –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö: `database/models/`

#### User (users.py)
```python
class User(Base):
    telegram_id: int          # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID Telegram
    username: str | None
    fullname: str | None
    role: str                 # "user" | "admin"
    balance: float            # –ë–æ–Ω—É—Å–Ω—ã–π –±–∞–ª–∞–Ω—Å

    # –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
    referrer_id: int | None
    referrals_count: int
    referral_earnings: float

    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    orders_count: int
    total_spent: float

    # –ú–æ–¥–µ—Ä–∞—Ü–∏—è
    is_banned: bool
    ban_reason: str | None

    # –°–≤–æ–π—Å—Ç–≤–∞
    @property rank_info      # –†–∞–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ total_spent
    @property loyalty_status # –°–∫–∏–¥–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ orders_count
```

#### Order (orders.py)
```python
class OrderStatus(str, enum.Enum):
    DRAFT, PENDING, WAITING_ESTIMATION, WAITING_PAYMENT,
    VERIFICATION_PENDING, CONFIRMED, PAID, PAID_FULL,
    IN_PROGRESS, REVIEW, COMPLETED, CANCELLED, REJECTED

class WorkType(str, enum.Enum):
    MASTERS, DIPLOMA, COURSEWORK, INDEPENDENT, ESSAY,
    REPORT, CONTROL, PRESENTATION, PRACTICE, OTHER, PHOTO_TASK

class Order(Base):
    user_id: int              # FK ‚Üí users.telegram_id
    work_type: str
    subject: str | None
    topic: str | None
    deadline: str | None

    # –§–∏–Ω–∞–Ω—Å—ã
    price: float
    discount: float
    bonus_used: float
    paid_amount: float

    # –°—Ç–∞—Ç—É—Å –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
    status: str
    progress: int             # 0-100%
    channel_message_id: int   # ID –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –∫–∞–Ω–∞–ª–µ (deprecated)
```

### 5.4 API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: `bot/api/routes.py`

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/health` | Health check |
| GET | `/api/config` | –ü—É–±–ª–∏—á–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (bot_username, support) |
| GET | `/api/user` | –ü—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + –∑–∞–∫–∞–∑—ã |
| GET | `/api/orders` | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π |
| GET | `/api/orders/{id}` | –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ |
| POST | `/api/promo` | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞ |
| POST | `/api/roulette/spin` | –í—Ä–∞—â–µ–Ω–∏–µ —Ä—É–ª–µ—Ç–∫–∏ –±–æ–Ω—É—Å–æ–≤ |

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** Header `X-Telegram-Init-Data` —Å HMAC-SHA256 –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

### 5.5 Frontend API: `mini-app/src/api/userApi.ts`

```typescript
// Hardcoded URL (–Ω–µ –∏–∑ env!)
const API_BASE = 'https://academic-saloon.duckdns.org/api'

// Auth header
headers: {
    'X-Telegram-Init-Data': window.Telegram?.WebApp?.initData
}
```

---

## 6. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Backend (requirements.txt)
```
aiogram>=3.10.0          # Telegram Bot Framework
pydantic-settings>=2.0.0 # Config management
sqlalchemy>=2.0.0        # ORM
asyncpg>=0.28.0          # PostgreSQL async driver
alembic>=1.12.0          # DB migrations
redis>=5.0.0             # Cache & FSM storage
python-dotenv>=1.0.0     # .env loader
pytz>=2024.1             # Timezones
yookassa>=3.0.0          # Payment gateway
httpx>=0.25.0            # HTTP client
fastapi>=0.109.0         # Web API
uvicorn>=0.27.0          # ASGI server
```

### Frontend (package.json)
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "@telegram-apps/sdk-react": "^1.0.0"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.0",
    "typescript": "^5.3.0",
    "vite": "^5.0.0"
  }
}
```

---

## 7. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
```bash
# Bot
BOT_TOKEN=              # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_USERNAME=           # Username –±–æ—Ç–∞ (–±–µ–∑ @)
ADMIN_IDS=              # JSON array: [123456789, 987654321]

# PostgreSQL
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_DB=
POSTGRES_HOST=          # "db" –¥–ª—è Docker, "localhost" –¥–ª—è dev
POSTGRES_PORT=5432

# Redis
REDIS_HOST=             # "redis" –¥–ª—è Docker
REDIS_PORT=6379
REDIS_DB_FSM=0
REDIS_DB_CACHE=1

# –û–ø–ª–∞—Ç–∞ (P2P)
PAYMENT_PHONE=          # –ù–æ–º–µ—Ä –¥–ª—è –°–ë–ü
PAYMENT_CARD=           # –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
PAYMENT_BANKS=          # –°—Ç—Ä–æ–∫–∞: "–°–±–µ—Ä ¬∑ –¢-–ë–∞–Ω–∫"
PAYMENT_NAME=           # –ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
```bash
# –ÆKassa (–æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞)
YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=

# –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤)
YANDEX_DISK_TOKEN=
```

---

## 8. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Docker Compose
```yaml
services:
  db:      # PostgreSQL 15 Alpine
  redis:   # Redis 7 Alpine
  bot:     # Python 3.11-slim + main.py
```

### Nginx (–ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞)
```nginx
server {
    listen 443 ssl;
    server_name academic-saloon.duckdns.org;

    ssl_certificate /etc/letsencrypt/live/.../fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/.../privkey.pem;

    location /api/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### Vercel (mini-app/vercel.json)
```json
{
  "rewrites": [{ "source": "/(.*)", "destination": "/" }],
  "headers": [{
    "source": "/(.*)",
    "headers": [
      { "key": "X-Frame-Options", "value": "ALLOWALL" }
    ]
  }]
}
```

---

## 9. –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- [x] Telegram Bot (polling mode)
- [x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- [x] Wizard —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ (–≤—Å–µ —Ç–∏–ø—ã —Ä–∞–±–æ—Ç)
- [x] –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–∞ (13 —Å—Ç–∞—Ç—É—Å–æ–≤)
- [x] Live-–∫–∞—Ä—Ç–æ—á–∫–∏ –≤ Forum Topics –∞–¥–º–∏–Ω—Å–∫–æ–π –≥—Ä—É–ø–ø—ã
- [x] –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç –∫–ª–∏–µ–Ω—Ç-–∞–¥–º–∏–Ω —á–µ—Ä–µ–∑ —Ç–æ–ø–∏–∫–∏
- [x] FastAPI + Mini App API
- [x] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram initData (HMAC-SHA256)
- [x] Mini App –Ω–∞ Vercel (–ø—Ä–æ—Ñ–∏–ª—å, –∑–∞–∫–∞–∑—ã, —Ä—É–ª–µ—Ç–∫–∞)
- [x] SSL —á–µ—Ä–µ–∑ Let's Encrypt
- [x] Nginx reverse proxy
- [x] Docker deployment

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ / "–∫–æ—Å—Ç—ã–ª–∏":

1. **API_BASE hardcoded**: –í `userApi.ts` URL API –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è env:
   ```typescript
   const API_BASE = 'https://academic-saloon.duckdns.org/api'
   ```
   *–ü—Ä–∏—á–∏–Ω–∞: –ø—Ä–æ–±–ª–µ–º—ã —Å env variables –Ω–∞ Vercel –ø—Ä–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ*

2. **–ö–∞–Ω–∞–ª –∑–∞–∫–∞–∑–æ–≤ deprecated**: `ORDERS_CHANNEL_ID` –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–µ–ø–µ—Ä—å –≤ Forum Topics (`ADMIN_GROUP_ID`). –ö–æ–¥ –∫–∞–Ω–∞–ª–∞ –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

3. **–î–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞**: Progress –∑–∞–∫–∞–∑–∞ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ø–æ —Å—Ç–∞—Ç—É—Å—É), –∏ –≤—Ä—É—á–Ω—É—é –∞–¥–º–∏–Ω–æ–º.

4. **Implicit consent**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ñ–µ—Ä—Ç—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º /start (–±–µ–∑ –±–∞—Ä—å–µ—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è).

5. **–ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª orders.py**: –•–µ–Ω–¥–ª–µ—Ä –∑–∞–∫–∞–∑–æ–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç 60k+ —Ç–æ–∫–µ–Ω–æ–≤ –∫–æ–¥–∞ ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥.

---

## 10. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ
git clone <repo-url> && cd academic_saloon

# 2. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv && source venv/bin/activate

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env (–ø–æ—Å—Ç–∞–≤–∏—Ç—å BOT_TOKEN, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î...)

# 5. –ü–æ–¥–Ω—è—Ç—å PostgreSQL + Redis (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker)
docker-compose up -d db redis

# 6. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# 7. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python main.py
```

### –î–µ–ø–ª–æ–π –Ω–∞ VPS

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git pull origin main

# 2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose build
docker-compose up -d

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f bot
```

### Mini App —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
cd mini-app
npm install
npm run dev    # localhost:5173
npm run build  # Production build
```

---

## 11. –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

| –†–µ—Å—É—Ä—Å | URL |
|--------|-----|
| Production Bot | @Kladovaya_GIPSR_bot |
| Mini App | Vercel (—á–µ—Ä–µ–∑ Telegram WebApp) |
| API Docs | https://academic-saloon.duckdns.org/api/docs |
| Support | @Thisissaymoon |
| –û—Ñ–µ—Ä—Ç–∞ | https://telegra.ph/Bolshoj-Kodeks-Akademicheskogo-Saluna-11-30 |

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞—É–¥–∏—Ç–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã.*
