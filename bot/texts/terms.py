"""
Тексты оферты Академического Салуна.
Короткая версия для быстрого принятия + полная версия по разделам.
"""
import random
from datetime import datetime
from zoneinfo import ZoneInfo


# ══════════════════════════════════════════════════════════════
#                    ПРИВЕТСТВИЯ ПО ВРЕМЕНИ СУТОК (МСК)
# ══════════════════════════════════════════════════════════════

MSK_TZ = ZoneInfo("Europe/Moscow")

GREETING_MORNING = "Доброе утро. Пока город просыпается и пьет кофе, я уже заряжаю револьверы. Самое время решить проблемы с учебой, чтобы день прошел спокойно."

GREETING_DAY = "День в разгаре, солнце высоко. Вижу, ты устал с дороги. Паркуй коня, выдыхай. Сейчас разберемся с твоими долгами."

GREETING_EVENING = "Добрый вечер. Салун открыт, музыка играет, виски налит. Лучшее время, чтобы скинуть груз ответственности на мой стол и отдохнуть."

GREETING_NIGHT = "Тихая ночь... Все спят, только мы с тобой не дремлем. Не переживай, Салун работает круглосуточно. Говори тише, я слушаю."

STATIC_USP = """\n\nТы слышал голосовое — ты попал в правильное место. 🤠

В нашем Салуне ценят тишину, честность и крепкое слово. Мы не любим лишней бюрократии и сложных схем, как в больших конторах.

Здесь всё устроено по-людски: ты оставляешь задачу на барной стойке, а мы берем всю пыльную работу на себя. Тихо, спокойно и точно в срок.

Выдыхай, путник. Скидывай задание, а мы позаботимся об остальном. Жми кнопку ниже 👇"""


def get_time_greeting(with_quote: bool = True) -> str:
    """
    Возвращает приветствие в зависимости от текущего времени суток (МСК).

    06:00 – 11:59 → Утро
    12:00 – 17:59 → День
    18:00 – 23:59 → Вечер
    00:00 – 05:59 → Ночь
    """
    msk_hour = datetime.now(MSK_TZ).hour

    if 6 <= msk_hour < 12:
        base = GREETING_MORNING + STATIC_USP
    elif 12 <= msk_hour < 18:
        base = GREETING_DAY + STATIC_USP
    elif 18 <= msk_hour < 24:
        base = GREETING_EVENING + STATIC_USP
    else:  # 0 <= msk_hour < 6
        base = GREETING_NIGHT + STATIC_USP

    if with_quote:
        return base + f"\n\n<i>{get_random_quote()}</i>"
    return base


# Подпись для голосового сообщения
VOICE_CAPTION = "🎙 <i>Голос Хозяина — нажми, послушай</i>"


# ══════════════════════════════════════════════════════════════
#                    СЛУЧАЙНЫЕ КОВБОЙСКИЕ ФРАЗЫ
# ══════════════════════════════════════════════════════════════

COWBOY_QUOTES = [
    "🌵 «Хороший ковбой всегда держит слово»",
    "🐎 «В этих краях дела делаются быстро и качественно»",
    "🎯 «Один выстрел — одна пятёрка»",
    "🤠 «Добро пожаловать, странник»",
    "⭐ «Шериф следит за порядком»",
    "🌅 «Закат красив, но дедлайн важнее»",
    "🔥 «У нас горячо — работа кипит»",
    "💨 «Быстрее ветра, точнее пули»",
    "🏜 «Через пустыню сессии — к оазису диплома»",
    "🎰 «С нами ты всегда в выигрыше»",
]


def get_random_quote() -> str:
    """Возвращает случайную ковбойскую фразу"""
    return random.choice(COWBOY_QUOTES)

# ══════════════════════════════════════════════════════════════
#                    КОРОТКАЯ ВЕРСИЯ (экран приветствия)
# ══════════════════════════════════════════════════════════════

TERMS_SHORT = """🤝  <b>Условия партнёрства</b>

Прежде чем войти в Салун, ознакомься с главным:


<b>◈  Что ты получаешь</b>
Учебные материалы — образцы, примеры, аналитику.
Как использовать — твоё решение.

<b>◈  Три правки бесплатно</b>
Доработаем по замечаниям. Хватает почти всегда.

<b>◈  Антиплагиат</b>
Не проверяем заранее — чтобы не засветить твой текст в системах. Пишем качественно с нуля.

<b>◈  Оплата</b>
50% аванс → работа → 50% после проверки.
Отмена до старта = полный возврат.

<b>◈  Конфиденциальность</b>
Что в Салуне — остаётся в Салуне.


Нажимая «Принимаю», ты соглашаешься с полными условиями."""


# ══════════════════════════════════════════════════════════════
#                    ПОЛНАЯ ВЕРСИЯ (по разделам)
# ══════════════════════════════════════════════════════════════

TERMS_FULL_INTRO = """📜  <b>Полные условия</b>

Выбери раздел, чтобы прочитать подробнее:"""


TERMS_SECTION_1 = """📦  <b>Что мы делаем</b>


Академический Салун — сервис подготовки учебных материалов.

Мы создаём:
◈  Образцы научных и учебных работ
◈  Примеры оформления по стандартам
◈  Аналитические материалы по темам
◈  Справочные и методические пособия

<b>Важно понимать:</b>
Ты получаешь основу для самостоятельного изучения. Как именно использовать материалы — твоё личное решение и ответственность.

Мы не гарантируем приём работы третьими лицами (преподавателями, комиссиями). Качество делаем, но чужие решения не контролируем."""


TERMS_SECTION_2 = """🔧  <b>Правки и доработки</b>


<b>Три итерации бесплатно:</b>
◈  Уточнения по содержанию
◈  Исправления по замечаниям
◈  Дополнения в рамках ТЗ

Этого хватает в 95% случаев.

<b>Что считается новой задачей:</b>
◈  Смена темы работы
◈  Увеличение объёма более чем на 20%
◈  Новые требования после старта
◈  Изменение типа работы

Такие случаи обсуждаем отдельно — это честно для обеих сторон.

<b>Срок на проверку:</b>
После получения работы — 3 дня на замечания. Молчишь 3 дня — заказ считается принятым. Нужно больше времени — скажи заранее."""


TERMS_SECTION_3 = """🔍  <b>Про антиплагиат</b>


Мы <b>не проверяем</b> работу в антиплагиат-системах. И вот почему это тебе на пользу:

<b>Как работают вузовские системы:</b>
Они запоминают каждый проверенный текст. Если мы проверим до сдачи — твоя работа попадёт в базу. Когда загрузишь сам — система может пометить как дубликат.

<b>Наш подход:</b>
◈  Пишем качественно с нуля
◈  Оригинальность от 85%
◈  Не светим твой текст в системах
◈  Если после сдачи проблемы с % — бесплатно доработаем в течение недели

<b>Хочешь проверить сам?</b>
Text.ru, Content-Watch — эти сервисы безопасны, не сливают в вузовские базы."""


TERMS_SECTION_4 = """💰  <b>Оплата и возврат</b>


<b>Схема оплаты:</b>
50% аванс → выполнение → 50% после твоей проверки

<b>Возврат средств:</b>
◈  Отмена до начала работы — 100%
◈  Отмена в процессе — 50% (часть работы уже сделана)
◈  После получения готовой работы — возврат невозможен

<b>Не является основанием для возврата:</b>
◈  «Не понравился стиль»
◈  «Преподаватель не принял»
◈  «Оказалось нужно по-другому»

Все детали обсуждай до начала работы — тогда результат будет именно таким, как нужно.

<b>Баланс в Салуне:</b>
Бонусы за рефералов и компенсации копятся на балансе. Можно тратить на свои заказы."""


TERMS_SECTION_5 = """⏰  <b>Сроки</b>


<b>Отсчёт срока начинается:</b>
С момента оплаты аванса И получения всех материалов от тебя (методички, требования, примеры).

<b>Наши обязательства:</b>
Задержка более 3 дней по нашей вине — скидка 15% или полный возврат на твой выбор.

<b>Твоя зона ответственности:</b>
◈  Дать полное и чёткое ТЗ
◈  Предоставить нужные материалы
◈  Отвечать на уточняющие вопросы

Диплом за 2 дня не будет шедевром. Сложные работы требуют времени — закладывай запас."""


TERMS_SECTION_6 = """🔒  <b>Конфиденциальность</b>


<b>Мы гарантируем:</b>
◈  Не передаём твои данные третьим лицам
◈  Не публикуем выполненные работы
◈  Не продаём и не перепродаём материалы
◈  Не храним данные дольше необходимого

<b>Что в Салуне — остаётся в Салуне.</b>

Переписка, детали заказа, личная информация — всё под защитой. Мы дорожим репутацией и твоим доверием."""


TERMS_SECTION_7 = """⚖️  <b>Ограничение ответственности</b>


<b>Мы делаем:</b>
◈  Качественные материалы по твоему ТЗ
◈  Работу в согласованные сроки
◈  Доработки в рамках договорённостей

<b>Мы не контролируем:</b>
◈  Решения преподавателей и комиссий
◈  Требования, о которых ты не сообщил
◈  Изменения в правилах вуза после старта

<b>Форс-мажор:</b>
Технические сбои, блокировки, обстоятельства непреодолимой силы — решаем индивидуально, находим компромисс.

<b>Принимая условия, ты подтверждаешь:</b>
◈  Тебе есть 18 лет
◈  Ты понимаешь характер услуги
◈  Ты согласен с правилами Салуна"""


# ══════════════════════════════════════════════════════════════
#                    СЛОВАРЬ РАЗДЕЛОВ
# ══════════════════════════════════════════════════════════════

TERMS_SECTIONS = {
    "service": ("📦 Что мы делаем", TERMS_SECTION_1),
    "revisions": ("🔧 Правки", TERMS_SECTION_2),
    "antiplagiat": ("🔍 Антиплагиат", TERMS_SECTION_3),
    "payment": ("💰 Оплата", TERMS_SECTION_4),
    "deadlines": ("⏰ Сроки", TERMS_SECTION_5),
    "privacy": ("🔒 Конфиденциальность", TERMS_SECTION_6),
    "liability": ("⚖️ Ответственность", TERMS_SECTION_7),
}


# ══════════════════════════════════════════════════════════════
#                    СООБЩЕНИЕ ПОСЛЕ ПРИНЯТИЯ
# ══════════════════════════════════════════════════════════════

TERMS_ACCEPTED = """✅  <b>Добро пожаловать в Салун, {name}!</b>

Условия приняты. Теперь ты полноправный партнёр.

Если привёл друг — на первый заказ скидка <b>5%</b>.

<i>Выбирай, чем могу помочь:</i>"""

TERMS_ACCEPTED_RETURNING = """🍸  <b>С возвращением, {name}!</b>

{status}
{discount_line}

<i>Чем могу помочь?</i>"""
